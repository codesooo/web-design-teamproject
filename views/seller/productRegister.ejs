<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" 
    rel="stylesheet"
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
    crossorigin="anonymous">

    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>


    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <% include ./../layout/header.ejs %>
    
    <div class="container">
        <div class="input-form-backgroud row">
          <div class="input-form col-md-12 mx-auto">
            <h4 class="mb-3">상품등록</h4>
            <form class="validation-form"  enctype="multipart/form-data" id = "productRegister" action="product/write" method = "post" >
                <div class="row">
                  <div class="col-md-6 mb-3">
                      <label for="floatingTextarea">이름</label>
                      <input type="text" class="form-control" id="name" name="name" placeholder="상품 이름을 입력하세요." required>
    
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="category">카테고리</label>
                    <select class="form-select" aria-label="Default select example" id="category" name="category">
                        <option selected>상품 카테고리 선택</option>
                        <option value="1">다이어리</option>
                        <option value="2">필기노트</option>
                        <option value="3">스티커</option>
                        <option value="4">배경화면</option>
                      </select>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="input-group">상세정보</label>
                    <textarea class="form-control" aria-label="With textarea" 
                    placeholder="상품 상세정보를 입력하세요." id="detail", name="detail"></textarea>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="formFileMultiple" class="form-label">파일 첨부</label>
                    <input class="form-control" type="file" id="formFileMultiple" name="imageurl" multiple>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="floatingTextarea">가격</label>
                      <input type="text" class="form-control" id="price" name="price"
                      oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                      required>
                       
                </div>
              </div>
              <div class="mb-4"></div>
              <button class="btn btn-primary btn-lg btn-block" id="productregister" type="submit">상품 등록</button>

              </form>
                    
  
          </div>
        </div>
  </body>
</html>
</body>
<% include ./../layout/footer.ejs %>
</html>

<script>
    jQuery(document).ready(function($){    
    $('#price').on('focus', function(){
        var val = $('#price').val();
        if(!isEmpty(val)){
            val = val.replace(/,/g,'');
            $('#price').val(val);
        }
    });
    
    $('#price').on('blur', function(){
        var val = $('#price').val();
        if(!isEmpty(val) && isNumeric(val)){
            val = currencyFormatter(val);
            $('#price').val(val);
        }
    });    
});

function isEmpty(value){
        if(value.length == 0 || value == null){
            return true;
        }else {
            return false;
        }
    }
    // Number check with Regular expression
    function isNumeric(value){
        var regExp = /^[0-9]+$/g;
        return regExp.test(value);
    }
    // 숫자 세자리 마다 콤마를 추가하여 금액 표기 형태로 변환
    function currencyFormatter(amount){
        return amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    }
</script>

